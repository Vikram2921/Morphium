// Example: User-defined functions
// Calculate tax and format price

function calculateTax(amount, rate) {
  return amount * rate
}

function formatPrice(value) {
  return "$" + toNumber(value).toFixed(2)
}

{
  items: map(input.items, "item", {
    id: item.id,
    price: item.price,
    tax: calculateTax(item.price, 0.1),
    total: item.price + calculateTax(item.price, 0.1),
    formatted: formatPrice(item.price + calculateTax(item.price, 0.1))
  })
}
